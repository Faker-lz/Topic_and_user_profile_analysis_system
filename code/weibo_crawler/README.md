# weibo_curl æ–‡æ¡£è¯´æ˜

## ä»‹ç»

ç”±tornadoæ¡†æ¶ä»¥åç¨‹è¿è¡Œæ–¹å¼å®Œæˆçš„é€šè¿‡**çˆ¬å–æ–°æµªå¾®åš**ä¿¡æ¯æ¥æä¾›è·å–å„ç§ç±»å‹æ•°æ®çš„webæœåŠ¡

## é…ç½®æ–¹å¼ï¼š

1. åœ¨`settings.py`ä¸­æ›´æ”¹`PORT_NUM`å¯ä»¥æŒ‡å®šç¨‹åºè¿è¡Œçš„ç«¯å£å·
2. åœ¨`settings.py`ä¸­æ›´æ”¹`LOGGING`å¯ä»¥æ›´æ”¹æ—¥å¿—çš„è®°å½•ä½ç½®
3. åœ¨`account/account.json`ä¸­çš„`cookies`å­—æ®µä¸­å¡«å†™ç”±å¤šä¸ªæœ‰æ•ˆcookieç»„æˆçš„åˆ—è¡¨ï¼ˆCookieè·å–è§æ–‡æ¡£æœ«å°¾ï¼‰ï¼Œåœ¨`proxies`å­—æ®µä¸­å¡«å†™ç”±å¤šä¸ªä»£ç†ç»„æˆçš„åˆ—è¡¨ï¼Œæ¯ä¸ªä»£ç†çš„æ ¼å¼ä¸º`[proxy_host, proxy_port]`
4. ä»¥ä¸Šé…ç½®å®Œæˆåè¿è¡Œ`weibo_curl_api.py`å³å¯ã€‚

## è¿”å›ç»“æœæ ¼å¼ï¼š

```
{
    'error_code':0,
    'data':{
        'result': {} or [],
        'cursor': str
    },
    'error_msg':''
}
```

## API

### 1. æ¨æ–‡æœç´¢æ¥å£

+ æ ¹æ®å…³é”®å­—æœç´¢æ¨æ–‡
+ è·¯ç”±ï¼š`/weibo_curl/api/search_tweets`

#### è¯·æ±‚å‚æ•°

URLå‚æ•°ï¼š

| key     | description        | æ˜¯å¦å¿…é€‰               | example |
| ------- | ------------------ | ------------------ | ------- |
| keyword | æœç´¢å…³é”®å­—              | æ˜¯                  | 'æ–°å† è‚ºç‚'  |
| cursor  | æœç´¢ç¬¬å‡ é¡µ              | å¦ï¼Œé»˜è®¤ç¬¬ä¸€é¡µ            | 2       |
| is_hot  | æ˜¯å¦æœç´¢çƒ­é—¨å¾®åšï¼Œ1è¡¨ç¤ºæ˜¯ï¼Œ0è¡¨ç¤ºå¦ | å¦ï¼Œé»˜è®¤ä¸ºFalseï¼Œå³æœç´¢æ™®é€šå¾®åš | 1       |

#### è¿”å›æ ¼å¼

æˆåŠŸæ—¶è¿”å›jsonçš„ `result` å­—æ®µä¸ºä¸€ä¸ªlç”±å¤šä¸ªdictç»„æˆçš„listï¼Œæ¯ä¸ªdictä»£è¡¨ä¸€æ¡å¾®åšï¼Œæ¯ä¸ªå…ƒç´ (dict)çš„æ ¼å¼å¦‚ä¸‹ï¼š(æ¯ä¸ªå­—æ®µé»˜è®¤å€¼å‡ä¸ºç©ºå­—ç¬¦ä¸²)

| key             | description     | value type      | example                                                                                                                                 |
| --------------- | --------------- | --------------- | --------------------------------------------------------------------------------------------------------------------------------------- |
| head            | è¯¥æ¡å¾®åšçš„ç”¨æˆ·çš„å¤´åƒurl   | str             | "https://tvax1.sinaimg.cn/crop.0.0.700.700.50/0082iVvEly8gacm42leeaj30jg0jgmyc.jpg?KID=imgbed,tva&Expires=1601179960&ssig=fwRq%2FWyfZS" |
| weibo_id        | å¾®åšid            | str             | 'Jhv4a7KAd'                                                                                                                             |
| user_id         | ç”¨æˆ·çš„id           | str             | '6004281123'                                                                                                                            |
| screen_name     | ç”¨æˆ·å             | str             | '21ä¸–çºªç»æµæŠ¥é“'                                                                                                                              |
| text            | å¾®åšå†…å®¹            | str             | '#æ–°å† åº·å¤è€…äºŒæ¬¡...'                                                                                                                           |
| article_url     | å¤´æ¡æ–‡ç« url         | str             | ""                                                                                                                                      |
| location        | å‘å¸ƒä½ç½®            | str             | ""                                                                                                                                      |
| at_users        | è‰¾ç‰¹çš„ç”¨æˆ·ï¼Œæ— è‰¾ç‰¹æ—¶ä¸ºç©ºåˆ—è¡¨  | [str, str, ...] | ['æ¢¨è§†é¢‘ä½“è‚²']                                                                                                                               |
| topics          | è¯é¢˜ï¼Œå¤šä¸ªè¯é¢˜ä¹‹é—´ç”¨','åˆ†éš” | str             | "è¿ªä¸½çƒ­å·´é•¿æ­Œè¡Œ,è¿ªä¸½çƒ­å·´ä½ æ˜¯æˆ‘çš„è£è€€,è¿ªä¸½çƒ­å·´ä¹”æ™¶æ™¶,æ˜Ÿé™…é¢†èˆªå‘˜è¿ªä¸½çƒ­å·´"                                                                                                  |
| reposts_count   | è½¬å‘æ•°             | str             | '65'                                                                                                                                    |
| comments_count  | è¯„è®ºæ•°             | str             | '33'                                                                                                                                    |
| attitudes_count | ç‚¹èµæ•°             | str             | '14'                                                                                                                                    |
| created_at      | åˆ›å»ºæ—¶é—´            | str             | '2020-08-25 09:12'                                                                                                                      |
| source          | å‘å¸ƒå·¥å…·            | str             | 'iPhoneå®¢æˆ·ç«¯'                                                                                                                             |
| pics            | å›¾ç‰‡url           | str             | ''                                                                                                                                      |
| video_url       | è§†é¢‘url           | str             | ''                                                                                                                                      |
| retweet         | è½¬å‘çš„å¾®åšç›¸å…³ä¿¡æ¯       | dict            | è§ä¸‹                                                                                                                                      |

+ ä¸Šé¢è¡¨æ ¼ä¸­`retweet`å­—æ®µçš„å€¼ï¼š

| key             | description     | value type                             | example                                                                                                                                  |
| --------------- | --------------- | -------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------- |
| weibo_id        | è½¬å‘å¾®åšçš„id         | str                                    | "E46COzuWT"                                                                                                                              |
| user_id         | ç”¨æˆ·çš„id           | str                                    | "1669879400"                                                                                                                             |
| screen_name     | ç”¨æˆ·å             | str                                    | "Dear-è¿ªä¸½çƒ­å·´"                                                                                                                              |
| text            | å¾®åšå†…å®¹            | str                                    |                                                                                                                                          |
| article_url     | å¤´æ¡æ–‡ç« çš„url        | str                                    | "..."                                                                                                                                    |
| location        | å‘å¸ƒä½ç½®ï¼Œç¼ºå¤±æ—¶ä¸ºç©ºå­—ç¬¦ä¸²   | str                                    |                                                                                                                                          |
| at_users        | è‰¾ç‰¹çš„ç”¨æˆ·åˆ—è¡¨         | list                                   | ["Simple281314", "DILRABAçš„å°å®è´å„¿ç»ä¸æœè¾“", "Dear-è¿ªä¸½çƒ­å·´"]                                                                                        |
| topics          | è¯é¢˜ï¼Œå¤šä¸ªè¯é¢˜ä¹‹é—´ç”¨','åˆ†éš” | "è¿ªä¸½çƒ­å·´é•¿æ­Œè¡Œ,è¿ªä¸½çƒ­å·´ä½ æ˜¯æˆ‘çš„è£è€€,è¿ªä¸½çƒ­å·´ä¹”æ™¶æ™¶,æ˜Ÿé™…é¢†èˆªå‘˜è¿ªä¸½çƒ­å·´" |                                                                                                                                          |
| reposts_count   | è½¬å‘æ•°é‡            | str                                    | "0"                                                                                                                                      |
| comments_count  | è¯„è®ºæ•°é‡            | str                                    | "0"                                                                                                                                      |
| attitudes_count | ç‚¹èµæ•°é‡            | str                                    | "0"                                                                                                                                      |
| created_at      | åˆ›å»ºæ—¶é—´            | str                                    | "2016-08-18 11:36"                                                                                                                       |
| source          | æ¥æº              | str                                    | "iPhone 6s Plus"                                                                                                                         |
| pics            | å›¾ç‰‡              | list                                   | ["http://ww1.sinaimg.cn/large/63885668gw1f6xqh1wufxj21e00xc7wh.jpg", "http://ww2.sinaimg.cn/large/63885668gw1f6xqh598t3j21e00xc7wh.jpg"] |
| video_url       | è§†é¢‘ï¼Œæ— è§†é¢‘æ—¶ä¸ºç©ºå­—ç¬¦ä¸²    | str                                    | ""                                                                                                                                       |

### 2. æ¨æ–‡å±•ç¤ºæ¥å£

+ æ ¹æ®æ¨æ–‡idæœç´¢æ¨æ–‡
+ è·¯ç”±ï¼š `/weibo_curl/api/statuses_show`

#### è¯·æ±‚å‚æ•°

URLå‚æ•°ï¼š

| key      | description                           | æ˜¯å¦å¿…é€‰       | example   |
| -------- | ------------------------------------- | ---------- | --------- |
| weibo_id | å¾®åšid                                  | æ˜¯          | JmecdpWiO |
| cursor   | æŸ¥è¯¢ç¬¬å‡ é¡µ                                 | å¦ï¼Œé»˜è®¤ç¬¬ä¸€é¡µ    | 2         |
| hot      | è¡¨ç¤ºè·å–çƒ­è¯„è¿˜æ˜¯è·å–æ™®é€šè¯„è®ºï¼Œæ™®é€šè¯„è®ºåœ¨ç¬¬ä¸€é¡µåŒ…å«å°‘æ•°çƒ­è¯„ï¼Œå…¶ä½™ä¸ºæœ€æ–°è¯„è®º | å¦ï¼Œé»˜è®¤è·å–æ™®é€šè¯„è®º | 1         |

#### è¿”å›æ ¼å¼

æˆåŠŸæ—¶è¿”å›jsonçš„ `result` å­—æ®µæ ¼å¼

| key           | value type                                           | description                                                      | example                                                                            |
| ------------- | ---------------------------------------------------- | ---------------------------------------------------------------- | ---------------------------------------------------------------------------------- |
| original      | bool                                                 | æ˜¯å¦ä¸ºåŸåˆ›                                                            | false                                                                              |
| weibo_id      | str                                                  | å¾®åšid                                                             | "Jgs8rlEno"                                                                        |
| user_id       | str                                                  | å‘å¸ƒè€…çš„id                                                           | "1669879400"                                                                       |
| user_name     | str                                                  | å‘å¸ƒè€…çš„æ˜µç§°                                                           | "Dear-è¿ªä¸½çƒ­å·´"                                                                        |
| video_url     | str                                                  | è§†é¢‘çš„url                                                           | ""                                                                                 |
| original_pics | list                                                 | åŸåˆ›å›¾ç‰‡çš„url                                                         |                                                                                    |
| retweet_pics  | list                                                 | è½¬å‘å¾®åšçš„å›¾ç‰‡url                                                       |                                                                                    |
| topics        | list                                                 | å¾®åšä¸­çš„è¯é¢˜                                                           | [""æ–¯ç»´è¯—è¶Šåƒè¶Šç¾""]                                                                      |
| at_users      | list                                                 | è‰¾ç‰¹çš„ç”¨æˆ·ï¼Œæ¯ä¸ªå…ƒç´ æ˜¯ä¸€ä¸ªdictï¼Œå…¶ä¸­åŒ…å«"at_user_name"å’Œ"at_user_id"ï¼Œåˆ†åˆ«è¡¨ç¤ºè‰¾ç‰¹ç”¨æˆ·çš„åå­—å’Œid | [{"at_user_name": "Swisseæ–¯ç»´è¯—", "at_user_id": "Swisse%E6%96%AF%E7%BB%B4%E8%AF%97"}] |
| weibo_content | å½“original == trueæ—¶è¯¥å­—æ®µç±»å‹ä¸ºstrï¼›å½“original == falseæ—¶ä¸ºdict | å¾®åšå†…å®¹ï¼Œç±»å‹ä¸ºstræ—¶å³ä¸ºå¾®åšåŸå†…å®¹ï¼›å½“ç±»å‹ä¸ºdictæ—¶ä¸ºè½¬å‘å¾®åšçš„å†…å®¹ï¼Œå…·ä½“å­—æ®µè§ä¸‹é¢                    |                                                                                    |
| comments      | list                                                 | è¯„è®ºåˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ ä¸ºä¸€ä¸ªdictï¼Œä»£è¡¨ä¸€æ¡è¯„è®º                                          |                                                                                    |
| max_page      | int                                                  | è¯„è®ºçš„æœ€å¤§é¡µæ•°                                                          | 2000                                                                               |

å½“å¾®åšæ—¶è½¬å‘ç±»å‹æ—¶weibo_contentä¸ºdictç±»å‹ï¼Œå…¶æ ¼å¼ï¼š

| key            | value type | description | example       |
| -------------- | ---------- | ----------- | ------------- |
| retweet        | str        | è½¬å‘å†…å®¹        | "#ä¸­å›½é¦–éƒ¨æµ·å¤–...." |
| retweet_reason | str        | è½¬å‘ç†ç”±        | "......"      |
| retweet_id     | str        | æ‰€è½¬å‘çš„å¾®åšçš„id   | "Jgoo94P6I"   |

commentsä¸­æ¯ä¸ªå…ƒç´ (dict)çš„æ ¼å¼ï¼Œæ¯ä¸ªå­—æ®µçš„å€¼ä¸ºnullæ—¶è¡¨ç¤ºæœªæå–åˆ°è¯¥å­—æ®µï¼š

| key          | value type | description | example            |
| ------------ | ---------- | ----------- | ------------------ |
| is_hot       | bool       | æ˜¯å¦ä¸ºçƒ­è¯„       | true               |
| user_id      | str        | è¯„è®ºç”¨æˆ·id      | "1669879400"       |
| screen_name  | str        | è¯„è®ºç”¨æˆ·çš„ç”¨æˆ·å    | "Swisseæ–¯ç»´è¯—"        |
| content      | str        | è¯„è®ºå†…å®¹        | "..."              |
| like_num     | str        | ç‚¹èµæ•°         | '616'              |
| publish_time | str        | å‘å¸ƒæ—¶é—´        | "2020-09-25 09:40" |
| publish_tool | str        | å‘å¸ƒå·¥å…·        | "å·¥å…·"               |

### 3. ç”¨æˆ·æœç´¢æ¥å£

+ è¯´æ˜ï¼šæ ¹æ®å…³é”®è¯æœç´¢ç”¨æˆ·
+ è·¯ç”±ï¼š`/weibo_curl/api/users_search`

#### è¯·æ±‚å‚æ•°

URLå‚æ•°ï¼š

| key       | description                                         | æ˜¯å¦å¿…é€‰     | example |
| --------- | --------------------------------------------------- | -------- | ------- |
| keyword   | æœç´¢å…³é”®å­—                                               | æ˜¯        | è¿ªä¸½çƒ­å·´    |
| cursor    | æŸ¥è¯¢ç¬¬å‡ é¡µ                                               | å¦ï¼Œé»˜è®¤ç¬¬1é¡µ  | 2       |
| user_type | æŸ¥è¯¢é™åˆ¶çš„ç”¨æˆ·ç±»å‹ï¼Œå€¼ä¸º1ï¼šæœºæ„è®¤è¯ï¼Œ 2ï¼šä¸ªäººè®¤è¯ï¼Œ3ï¼šæ™®é€šç”¨æˆ·ï¼Œå…¶ä½™å€¼å‡ä¸ºæ— é™åˆ¶          | å¦ï¼Œé»˜è®¤æ‰€æœ‰ç”¨æˆ· | 1       |
| gender    | æŸ¥è¯¢é™åˆ¶æ€§åˆ«ï¼Œå€¼ä¸º0ï¼šå¥³æ€§ï¼Œå€¼ä¸º1ï¼šç”·æ€§ï¼Œå…¶ä½™å€¼å‡ä¸ºæ— é™åˆ¶                       | å¦ï¼Œé»˜è®¤æ— é™åˆ¶  | 0       |
| age_limit | æŸ¥è¯¢å¹´é¾„é™åˆ¶ï¼Œå€¼ä¸º1ï¼šä½äº18å²ï¼Œ2ï¼š19-22å²ï¼Œ3ï¼š30-39å²ï¼Œ4ï¼šè¶…è¿‡40å²ï¼Œå…¶ä½™å€¼å‡ä¸ºæ— é™åˆ¶ | å¦ï¼Œé»˜è®¤æ— é™åˆ¶  | 1       |

#### è¿”å›æ ¼å¼

æˆåŠŸæ—¶è¿”å›jsonçš„ `result` å­—æ®µä¸ºä¸€ä¸ªlç”±å¤šä¸ªdictç»„æˆçš„listï¼Œæ¯ä¸ªdictä»£è¡¨ä¸€ä¸ªç”¨æˆ·ï¼Œæ¯ä¸ªå…ƒç´ (dict)çš„æ ¼å¼å¦‚ä¸‹ï¼š(æ¯ä¸ªå­—æ®µé»˜è®¤å€¼å‡ä¸ºNoneï¼Œè¡¨ç¤ºæœªæå–åˆ°é¡¹è¯¥ä¿¡æ¯)

| key             | description | value type           | example                                                   |
| --------------- | ----------- | -------------------- | --------------------------------------------------------- |
| user_id         | ç”¨æˆ·çš„id       | str                  | '1669879400'                                              |
| head            | ç”¨æˆ·å¤´åƒ        | str                  | "..."                                                     |
| nickname        | æ˜µç§°          | str                  | 'Dear-è¿ªä¸½çƒ­å·´'                                               |
| title           | æ‰€æ‹¥æœ‰çš„çš„å¤´è¡”     | str                  | 'å¾®åšä¸ªäººè®¤è¯'                                                  |
| verified_reason | è®¤è¯åŸå›         | str                  | 'å˜‰è¡Œä¼ åª’ç­¾çº¦æ¼”å‘˜\u3000'                                          |
| gender          | æ€§åˆ«          | int                  | 0                                                         |
| location        | ä½ç½®          | str                  | 'ä¸Šæµ· é™å®‰åŒº'                                                  |
| description     | ç®€ä»‹          | str                  | 'ç®€ä»‹ï¼šä¸€åªå–œæ¬¢é»˜é»˜è¡¨æ¼”çš„å°é€æ˜ã€‚å·¥ä½œè”ç³»jaywalk@jaywalk.com.cn ğŸ’'           |
| tags            | æ ‡ç­¾          | listï¼Œ[str, str, ...] | ['è¿ªä¸½çƒ­å·´', 'Dilraba', 'ä¸‰ç”Ÿä¸‰ä¸–æ•ä¸Šä¹¦', 'è…¾è®¯è§†é¢‘åˆ›é€ è¥', 'ç”µå½±æ—¥æœˆ', 'å£°ä¸´å…¶å¢ƒ'] |
| education       | æ•™è‚²ä¿¡æ¯        | str                  | 'æ•™è‚²ä¿¡æ¯ï¼šä¸Šæµ·æˆå‰§å­¦é™¢'                                             |
| work            | å·¥ä½œä¿¡æ¯        | str                  | 'èŒä¸šä¿¡æ¯ï¼šå˜‰è¡Œä¼ åª’'                                               |
| weibo_num       | å¾®åšæ•°         | str                  | '1184'                                                    |
| following       | å…³æ³¨æ•°         | str                  | '257'                                                     |
| followers       | ç²‰ä¸æ•°         | str                  | '7241ä¸‡'                                                   |

æ³¨ï¼š

+ å½“cursorè¶…è¿‡50æ—¶ä¼šè¿”å›ç©ºresultï¼Œcursorè¢«ç½®'0'

### 4. ç”¨æˆ·å±•ç¤ºæ¥å£

+ è¯´æ˜ï¼šæ ¹æ®ç”¨æˆ·idæœç´¢ç”¨æˆ·
+ è·¯ç”±ï¼š`/weibo_curl/api/users_show`

#### è¯·æ±‚å‚æ•°

URLæŸ¥è¯¢å­—ç¬¦ä¸²å‚æ•°:

| key     | description | example      |
| ------- | ----------- | ------------ |
| user_id | ç”¨æˆ·id        | '1669879400' |

#### è¿”å›æ ¼å¼

æˆåŠŸæ—¶è¿”å›jsonçš„ `result` å­—æ®µæ ¼å¼ï¼š 

| key             | description | value type | example                |
| --------------- | ----------- | ---------- | ---------------------- |
| id              | ç”¨æˆ·çœŸå®id      | str        | '1669879400'           |
| head            | ç”¨æˆ·å¤´åƒ        | str        | "..."                  |
| nickname        | æ˜µç§°          | str        | 'Dear-è¿ªä¸½çƒ­å·´'            |
| gender          | æ€§åˆ«          | str        | 'å¥³'                    |
| location        | ç”¨æˆ·æ‰€åœ¨åœ°       | str        | 'ä¸Šæµ·'                   |
| birthday        | ç”Ÿæ—¥          | str        | '0001-00-00'           |
| description     | ç”¨æˆ·ç®€ä»‹        | str        | 'ä¸€åªå–œæ¬¢é»˜é»˜è¡¨æ¼”çš„å°é€æ˜ã€‚å·¥ä½œè”ç³»...' |
| verified_reason | è®¤è¯ä¿¡æ¯        | str        | 'å˜‰è¡Œä¼ åª’ç­¾çº¦æ¼”å‘˜'             |
| education       | å­¦ä¹ ç»å†        | str        | 'ä¸Šæµ·æˆå‰§å­¦é™¢'               |
| work            | å·¥ä½œç»å†        | str        | 'å˜‰è¡Œä¼ åª’ '                |
| weibo_num       | å¾®åšæ•°         | int        | 1178                   |
| following       | å…³æ³¨æ•°         | int        | 257                    |
| followers       | ç²‰ä¸æ•°         | int        | 72325060               |
| max_page        | ä¸ªäººå¾®åšçš„æœ€å¤§é¡µæ•°   | int        | 200                    |

### 5. ç”¨æˆ·æ—¶é—´çº¿æ¥å£

+ è¯´æ˜ï¼šæ ¹æ®ç”¨æˆ·idæœç´¢ç”¨æˆ·çš„æ¨æ–‡

+ è·¯ç”±ï¼š`/weibo_curl/api/statuses_user_timeline`

#### è¯·æ±‚å‚æ•°ï¼š

URLæŸ¥è¯¢å‚æ•°ï¼š

| key     | description                                   | æ˜¯å¦å¿…é€‰ | example      |
| ------- | --------------------------------------------- | ---- | ------------ |
| user_id | ç”¨æˆ·id                                          | æ˜¯    | '1669879400' |
| cursor  | æŒ‡ç¤ºæœ¬æ¬¡æŸ¥è¯¢çš„é¡µæ•°ï¼Œé»˜è®¤ä¸º1                                | å¦    | '2'          |
| filter  | æŒ‡ç¤ºæ˜¯å¦çˆ¬å–è½¬å‘å¾®åšï¼Œå€¼ä¸º0æ—¶çˆ¬å–å…¨éƒ¨å¾®åšï¼ˆåŸåˆ›+è½¬å‘ï¼‰ï¼Œå€¼ä¸º1æ˜¯åªçˆ¬å–åŸåˆ›å¾®åšï¼Œé»˜è®¤ä¸º0 | å¦    | 1            |

#### è¿”å›æ ¼å¼

æˆåŠŸæ—¶è¿”å›`result`çš„æ ¼å¼ï¼š

| key              | description                                       | value type                                        | example                                                                                                                                                                                                        |
| ---------------- | ------------------------------------------------- | ------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| weibo_id         | å¾®åšid                                              | str                                               | 'Jgs8rlEno'                                                                                                                                                                                                    |
| user_id          | ç”¨æˆ·id                                              | str                                               | '1669879400'                                                                                                                                                                                                   |
| text             | å¾®åšå†…å®¹                                              | str                                               | "..."                                                                                                                                                                                                          |
| article_url      | å¤´æ¡æ–‡ç« urlï¼Œæ²¡æœ‰æ—¶ä¸ºç©ºå­—ç¬¦ä¸²                                  | str                                               | ''                                                                                                                                                                                                             |
| topics           | å¾®åšè®¾è®¡çš„è¯é¢˜                                           | listï¼Œæ¯ä¸ªå…ƒç´ ä¸ºä¸€ä¸ªstr                                   | ["ç§‹å¤©çš„ç¬¬ä¸€æ¯å¥¶èŒ¶", "..."]                                                                                                                                                                                            |
| at_users         | @çš„ç”¨æˆ·                                              | listï¼Œæ¯ä¸ªå…ƒç´ ä¸ºä¸€ä¸ªdictä»£è¡¨ä¸€ä¸ªç”¨æˆ·ï¼ŒåŒ…å«`user_id`å’Œ`user_name`ä¸¤ä¸ªé”® |                                                                                                                                                                                                                |
| pics             | åŸåˆ›å›¾ç‰‡çš„urlï¼Œæ¯ä¸€ä¸ªå…ƒç´ ä¸ºä¸€ä¸ªå›¾ç‰‡                               | list                                              | ['http://ww1.sina...', '....']                                                                                                                                                                                 |
| retweet_pictures | è½¬å‘å¾®åšçš„å›¾ç‰‡urlï¼Œæ¯ä¸€ä¸ªå…ƒç´ ä¸ºä¸€ä¸ªå›¾ç‰‡                             | list                                              | ['....', '....']                                                                                                                                                                                               |
| original         | æ˜¯å¦ä¸ºåŸåˆ›ï¼Œtrueè¡¨ç¤ºåŸåˆ›ï¼Œå³æ²¡æœ‰è½¬å‘ä»–äººå¾®åš                          | bool                                              | true                                                                                                                                                                                                           |
| video_url        | è§†é¢‘URLï¼Œæ²¡æœ‰æ—¶å€¼ä¸ºç©ºä¸²                                     | str                                               | "http://f.video.weibocdn.com/004CTge2gx07H4z7fXj201041200dmNl0E010.mp4?label=mp4_hd&template=852x480.25.0&trans_finger=62b30a3f061b162e421008955c73f536&Expires=1602637390&ssig=5znN56NTWR&KID=unistore,video" |
| location         | å¾®åšå‘å¸ƒä½ç½®ï¼Œæ²¡æœ‰æ—¶ä¸º"æ— "                                    | str                                               |                                                                                                                                                                                                                |
| create_time      | å¾®åšå‘å¸ƒæ—¶é—´                                            | str                                               | '2020-08-13 17:14'                                                                                                                                                                                             |
| source           | å¾®åšå‘å¸ƒå·¥å…·ï¼Œæ²¡æœ‰æ—¶ä¸º"æ— "                                    | str                                               |                                                                                                                                                                                                                |
| attitudes_count  | å¾®åšç‚¹èµæ•°                                             | int                                               | 417438                                                                                                                                                                                                         |
| reposts_count    | å¾®åšè½¬å‘æ•°                                             | int                                               | 6174                                                                                                                                                                                                           |
| comments_count   | å¾®åšè¯„è®ºæ•°                                             | int                                               | 22449                                                                                                                                                                                                          |
| retweet          | æ‰€è½¬å‘å¾®åšçš„å†…å®¹ï¼Œå½“æ²¡æœ‰è½¬å‘å¾®åšæ—¶å€¼ä¸ºç©ºå­—å…¸ï¼Œå¯ä»¥æ ¹æ®`original`å­—æ®µåˆ¤æ–­æ˜¯å¦æœ‰è½¬å‘çš„å¾®åš | dict                                              |                                                                                                                                                                                                                |

retweetå­—æ®µçš„å«ä¹‰ï¼Œå…¶ä¸­ä¿¡æ¯å‡ä¸ºæ‰€è½¬å‘çš„å¾®åšçš„ä¿¡æ¯ï¼š

| key             | desciption | value type   | example                                                 |
| --------------- | ---------- | ------------ | ------------------------------------------------------- |
| weibo_id        | å¾®åšçš„id      | str          | "Jn17oF5vN"                                             |
| user_id         | ç”¨æˆ·çš„id      | str          | "1669879400"                                            |
| text            | å¾®åšå†…å®¹       | str          | "#æˆ‘å‘ç¥–å›½å‘Šç™½##ç¥ç¦ä½ ä¸­å›½#ç¥ç¥–å›½ç”Ÿæ—¥å¿«ä¹ï¼ä»Šæ™š#å¤®è§†å›½åº†æ™šä¼š# è§ï½ Dear-è¿ªä¸½çƒ­å·´çš„å¾®åšè§†é¢‘  " |
| article_url     | å¾®åšæ–‡ç« çš„url   | ""           |                                                         |
| topics          | å¾®åšä¸­çš„è¯é¢˜     | list         | ["æˆ‘å‘ç¥–å›½å‘Šç™½", "ç¥ç¦ä½ ä¸­å›½", "å¤®è§†å›½åº†æ™šä¼š"]                           |
| at_users        | @çš„ç”¨æˆ·       | listï¼Œå†…å®¹åŒä¸Šä¸ªè¡¨æ ¼ |                                                         |
| attitudes_count | ç‚¹èµæ•°é‡       | int          | 1167971                                                 |
| comments_count  | è¯„è®ºæ•°é‡       | int          | 204803                                                  |
| reposts_count   | è½¬å‘æ•°é‡       | int          | 19219176                                                |
| pics            | å›¾ç‰‡         | list         |                                                         |

### 6. ç”¨æˆ·æœ‹å‹åˆ—è¡¨æ¥å£ï¼ˆæœ‹å‹å…³æ³¨çš„äººï¼‰

+ è¯´æ˜ï¼šæ ¹æ®ç”¨æˆ·çš„idæœç´¢ç”¨æˆ·æœ‹å‹ï¼ŒåŒæ—¶ä¹Ÿè¦è¿”å›ä»–ä»¬çš„ä¿¡æ¯
+ è·¯ç”±ï¼š`/weibo_curl/api/friends_list`

#### è¯·æ±‚å‚æ•°

URLå‚æ•°ï¼š

| key     | description | æ˜¯å¦å¿…é€‰ | example    |
| ------- | ----------- | ---- | ---------- |
| user_id | ç”¨æˆ·id        | æ˜¯    | 1669879400 |
| cursor  | é¡µæ•°ï¼Œé»˜è®¤ç¬¬ä¸€é¡µ    | å¦    | 1          |

#### è¿”å›æ ¼å¼

æˆåŠŸæ—¶è¿”å›jsonçš„ `result` å­—æ®µæ ¼å¼ï¼š

| key          | value type | description             | example       |
| ------------ | ---------- | ----------------------- | ------------- |
| friend_list  | array      | å„æœ‹å‹ç»„æˆçš„åˆ—è¡¨ï¼Œæ¯ä¸ªæœ‹å‹è¢«è¡¨ç¤ºæˆä¸€ä¸ªdict | [{}, {}, ...] |
| max_page_num | int        | æœ€å¤§é¡µæ•°                    | 10            |

friend_listä¸­æ¯ä¸ªæœ‹å‹æ‰€å°è£…çš„dictæ ¼å¼ï¼š

| key       | value type | description | example      |
| --------- | ---------- | ----------- | ------------ |
| user_id   | str        | ç”¨æˆ·çš„id       | "7482738083" |
| user_name | str        | ç”¨æˆ·å         | "ä¸Šæµ·å‘å¸ƒ"       |
| fans_num  | int        | ç²‰ä¸æ•°é‡        | 9332457      |

example:

```json
{
    "error_code": 0,
    "data": {
        "result": {
            "friend_list": [
                {
                    "user_id": "7482738083",
                    "user_name": "ç¹èŠ±BlossomsShanghai",
                    "fans_num": 11952
                },
                {
                    ......
                }
            ]
        },
        "cursor": 2
    },
    "error_msg": null
}
```

### 7. ç”¨æˆ·ç²‰ä¸åˆ—è¡¨æ¥å£

+ è¯´æ˜ï¼šæ ¹æ®ç”¨æˆ·idæœç´¢ç”¨æˆ·ç²‰ä¸
+ è·¯ç”±ï¼š `/weibo_curl/api/followers_list`

#### è¯·æ±‚å‚æ•°

URLå‚æ•°ï¼š

| key     | description | æ˜¯å¦å¿…é€‰ | example    |
| ------- | ----------- | ---- | ---------- |
| user_id | ç”¨æˆ·id        | æ˜¯    | 1669879400 |
| cursor  | é¡µæ•°ï¼Œé»˜è®¤ç¬¬ä¸€é¡µ    | å¦    | 1          |

#### è¿”å›æ ¼å¼

æˆåŠŸæ—¶è¿”å›jsonçš„ `result` å­—æ®µæ ¼å¼ï¼š

| key           | value type | description             | example       |
| ------------- | ---------- | ----------------------- | ------------- |
| follower_list | array      | å„ç²‰ä¸ç»„æˆçš„åˆ—è¡¨ï¼Œæ¯ä¸ªç²‰ä¸è¢«è¡¨ç¤ºæˆä¸€ä¸ªdict | [{}, {}, ...] |
| max_page_num  | int        | æœ€å¤§é¡µæ•°                    | 10            |

followe_listä¸­æ¯ä¸ªç²‰ä¸ä»£è¡¨çš„dictçš„æ ¼å¼ï¼š

| key       | value type | description | example      |
| --------- | ---------- | ----------- | ------------ |
| user_id   | str        | ç”¨æˆ·çš„id       | "6306674379" |
| user_name | str        | ç”¨æˆ·å         | "èƒ¡å°æ¤’09"      |
| fans_num  | int        | ç²‰ä¸æ•°é‡        | 8            |

example ä¸æœ‹å‹åˆ—è¡¨æ¥å£è¿”å›çš„ä¸€æ ·ã€‚

### 8. è´¦å·è®¾ç½®æ¥å£

+ è¯·æ±‚æ–¹å¼ï¼špost

+ è·¯ç”±ï¼š `\weibo_curl\api\update_account`

#### è¯·æ±‚çš„jsonæ ¼å¼

| key     | value type  | description             | example        |
| ------- | ----------- | ----------------------- | -------------- |
| cookies | list / null | æ›´æ–°cookiesçš„åˆ—è¡¨ï¼Œä¸ºnullè¡¨ç¤ºä¸æ›´æ–° | ['...', '...'] |
| proxies | list / null | æ›´æ–°proxiesçš„åˆ—è¡¨ï¼Œä¸ºnullè¡¨ç¤ºä¸æ›´æ–° | ['...', '...'] |

## é”™è¯¯ç±»å‹

```python
    # URLç¼ºå°‘å‚æ•°
    URL_LACK_ARGS = {
        'error_code': 2001,
        'error_msg': 'URL is lack of arguments.'
    }

    # URLå‚æ•°é”™è¯¯
    URL_ARGS_ERROR = {
        'error_code': 2002,
        'error_msg': 'URL args error.'
    }

    # ç™»å½•å¤±æ•ˆ
    LOGIN_ERROR = {
        'error_code': 2003,
        'error-msg': 'An error occurred while logging in.'
    }

    # ç”¨æˆ·ä¸å­˜åœ¨
    PAGE_NOT_FOUND = {
        'error_code': 2004,
        'error_msg': "Can't find the page."
    }

    # å¾®åšç½‘ç«™è¿”å›å…¶ä»–é”™è¯¯ä¿¡æ¯
    ABNORMAL_HTTP_CODE = {
        'error_code': 2005,
        'error_msg': "Sina weibo return an abnormal http code."
    }

    # æœªçŸ¥é”™è¯¯
    UNKNOWN_ERROR = {
        'error_code': 2006,
        'error_msg': "An unknown error has occurred here."
    }

    # Cookieå¤±æ•ˆ
    COOKIE_INVALID = {
        'error_code': 2007,
        'error_msg': "Cookie invalid."
    }

    # ipå¤±æ•ˆ
    IP_INVALID = {
        'error_code': 2008,
        'error_msg': 'Current ip address invalid.'
    }
```

## å¦‚ä½•è·å–cookie

1.ç”¨Chromeæ‰“å¼€<https://passport.weibo.cn/signin/login>ï¼›<br>
2.è¾“å…¥å¾®åšçš„ç”¨æˆ·åã€å¯†ç ï¼Œç™»å½•ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š
![](https://picture.cognize.me/cognize/github/weibospider/cookie1.png)
ç™»å½•æˆåŠŸåä¼šè·³è½¬åˆ°<https://m.weibo.cn>;<br>
3.æŒ‰F12é”®æ‰“å¼€Chromeå¼€å‘è€…å·¥å…·ï¼Œåœ¨åœ°å€æ è¾“å…¥å¹¶è·³è½¬åˆ°<https://weibo.cn>ï¼Œè·³è½¬åä¼šæ˜¾ç¤ºå¦‚ä¸‹ç±»ä¼¼ç•Œé¢:
![](https://picture.cognize.me/cognize/github/weibospider/cookie2.png)
4.ä¾æ­¤ç‚¹å‡»Chromeå¼€å‘è€…å·¥å…·ä¸­çš„Network->Nameä¸­çš„weibo.cn->Headers->Request Headersï¼Œ"Cookie:"åçš„å€¼å³ä¸ºæˆ‘ä»¬è¦æ‰¾çš„cookieå€¼ï¼Œå¤åˆ¶å³å¯ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š
![](https://picture.cognize.me/cognize/github/weibospider/cookie3.png)
5.è·å¾—cookieåå°†å…¶ç²˜è´´åˆ°account->account.jsonæ–‡ä»¶ä¸­çš„cookieså¯¹åº”é…ç½®é¡¹å³å¯ã€‚